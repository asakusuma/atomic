(function(t,e,undefined){function r(t){var e={exports:{}},r=e.exports,n={title:"Atomic CommonJS Harness"};t.call(e,e,r,n)}function n(){return l._.Bluebird}function i(t,e){return t.className.match(RegExp("(?:^|\\s)"+e.replace(/[^A-Z0-9\-\_]/gi,"-")+"(?!\\S)"))}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t,e,r){var n,i,o,a=s(t)?"array":"object",u={},l={},c=function(t,e){return t&&e?c._.set(t,e):t?u[t]:u};if(c.toString=function(){var e,r,n=[];if("object"===a)for(e in t)t.hasOwnProperty(e)&&n.push(e+" ("+(u[e]?"R":"?")+"): "+t[e]);else for(r=0,o=t.length;o>r;r++)n.push("["+r+"] ("+(u[t[r]]?"R":"?")+"): "+t[r]);return n.join("\n")},c._={raw:function(){return t},exists:function(e){if("array"===a){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return!0;return!1}for(var i in t)if(t.hasOwnProperty(i)&&i===e)return!0;return!1},add:function(){"array"===a?l[arguments[0]]||(l[arguments[0]]=1,t.push(arguments[0]),c._.set(arguments[0],null)):(t[arguments[0]]=arguments[1],e&&(c[arguments[0]]=arguments[0]),r&&(u[arguments[0]]=arguments[0]))},set:function(t,e){u[t]=e}},"object"===a)for(n in t)t.hasOwnProperty(n)&&(c._.set(n,null),e&&(c[n]=n),r&&(u[n]=n));else for(i=0,o=t.length;o>i;i++)c._.set(t[i],null);return c}if(!t.Atomic){var require=null,define=null,a=null;try{a=e()}catch(u){}var l=function(){l.define.apply(l,arguments)};l.Events={},l._={Fiber:null,EventEmitter:null,requires:{},modules:{}},l.config=t.ATOMIC_CONFIG||{},t.Atomic=l,l.augment=function(t,e){if("[object Array]"===Object.prototype.toString.call(t))t=t.concat(e);else for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t};var c=/[^A-Z0-9\-\_]/gi;r(function(t){(function(e){function r(t,e){var r;for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}function Fiber(){}var n=!1,i=Array.prototype,s=e.Fiber;Fiber.extend=function(t){function e(){n||(this.init.apply(this,arguments),this.init=void 0)}var i,s=this.prototype,o=t(s);return n=!0,i=e.prototype=new this,n=!1,i.init=function(){"function"==typeof s.init&&s.init.apply(this,arguments)},r(o,i),i.constructor=e,e.__base__=s,e.extend=Fiber.extend,e},Fiber.proxy=function(t,e){var r,n,i={};1===arguments.length&&(e=t,t=e.constructor.__base__),n=function(r){return function(){return t[r].apply(e,arguments)}};for(r in t)t.hasOwnProperty(r)&&"function"==typeof t[r]&&(i[r]=n(r));return i},Fiber.decorate=function(t){var e,n=t.constructor.__base__,s=i.slice.call(arguments,1),o=s.length;for(e=0;o>e;e++)r(s[e].call(t,n),t)},Fiber.mixin=function(t){var e,n=t.__base__,s=i.slice.call(arguments,1),o=s.length;for(e=0;o>e;e++)r(s[e](n),t.prototype)},Fiber.noConflict=function(){return e.Fiber=s,Fiber},t!==undefined?"function"==typeof t.setExports?t.setExports(Fiber):t.exports&&(t.exports=Fiber):e.Fiber=Fiber})(this),l._.Fiber=t.exports}),r(function(t,e,r){!function(t){function e(){this._events={},this._conf&&r.call(this,this._conf)}function r(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function n(t){this._events={},this.newListener=!1,r.call(this,t)}function i(t,e,r,n){if(!r)return[];var s,o,a,u,l,c,f,h=[],p=e.length,_=e[n],v=e[n+1];if(n===p&&r._listeners){if("function"==typeof r._listeners)return t&&t.push(r._listeners),[r];for(s=0,o=r._listeners.length;o>s;s++)t&&t.push(r._listeners[s]);return[r]}if("*"===_||"**"===_||r[_]){if("*"===_){for(a in r)"_listeners"!==a&&r.hasOwnProperty(a)&&(h=h.concat(i(t,e,r[a],n+1)));return h}if("**"===_){f=n+1===p||n+2===p&&"*"===v,f&&r._listeners&&(h=h.concat(i(t,e,r,p)));for(a in r)"_listeners"!==a&&r.hasOwnProperty(a)&&("*"===a||"**"===a?(r[a]._listeners&&!f&&(h=h.concat(i(t,e,r[a],p))),h=h.concat(i(t,e,r[a],n))):h=a===v?h.concat(i(t,e,r[a],n+2)):h.concat(i(t,e,r[a],n)));return h}h=h.concat(i(t,e,r[_],n+1))}if(u=r["*"],u&&i(t,e,u,n+1),l=r["**"])if(p>n){l._listeners&&i(t,e,l,p);for(a in l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===v?i(t,e,l[a],n+2):a===_?i(t,e,l[a],n+1):(c={},c[a]=l[a],i(t,e,{"**":c},n+1)))}else l._listeners?i(t,e,l,p):l["*"]&&l["*"]._listeners&&i(t,e,l["*"],p);return h}function s(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var r=0,n=t.length;n>r+1;r++)if("**"===t[r]&&"**"===t[r+1])return;for(var i=this.listenerTree,s=t.shift();s;){if(i[s]||(i[s]={}),i=i[s],0===t.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,e];else if(o(i._listeners)&&(i._listeners.push(e),!i._listeners.warned)){var u=a;this._events.maxListeners!==undefined&&(u=this._events.maxListeners),u>0&&i._listeners.length>u&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=e;return!0}s=t.shift()}return!0}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=10;n.prototype.delimiter=".",n.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},n.prototype.event="",n.prototype.once=function(t,e){return this.many(t,1,e),this},n.prototype.many=function(t,e,r){function n(){0===--e&&i.off(t,n),r.apply(this,arguments)}var i=this;if("function"!=typeof r)throw Error("many only accepts instances of Function");return n._origin=r,this.on(t,n),i},n.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var r=arguments.length,n=Array(r-1),s=1;r>s;s++)n[s-1]=arguments[s];for(s=0,r=this._all.length;r>s;s++)this.event=t,this._all[s].apply(this,n)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var a="string"==typeof t?t.split(this.delimiter):t.slice();i.call(this,o,a,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o){if(this.event=t,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var r=arguments.length,n=Array(r-1),s=1;r>s;s++)n[s-1]=arguments[s];o.apply(this,n)}return!0}if(o){for(var r=arguments.length,n=Array(r-1),s=1;r>s;s++)n[s-1]=arguments[s];for(var u=o.slice(),s=0,r=u.length;r>s;s++)this.event=t,u[s].apply(this,n);return u.length>0||this._all}return this._all},n.prototype.on=function(t,r){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof r)throw Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,r),this.wildcard)return s.call(this,t,r),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],r];else if(o(this._events[t])&&(this._events[t].push(r),!this._events[t].warned)){var n=a;this._events.maxListeners!==undefined&&(n=this._events.maxListeners),n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=r;return this},n.prototype.onAny=function(t){if(this._all||(this._all=[]),"function"!=typeof t)throw Error("onAny only accepts instances of Function");return this._all.push(t),this},n.prototype.addListener=n.prototype.on,n.prototype.off=function(t,e){if("function"!=typeof e)throw Error("removeListener only takes instances of Function");var r,n=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();n=i.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;r=this._events[t],n.push({_listeners:r})}for(var a=0;n.length>a;a++){var u=n[a];if(r=u._listeners,o(r)){for(var l=-1,c=0,f=r.length;f>c;c++)if(r[c]===e||r[c].listener&&r[c].listener===e||r[c]._origin&&r[c]._origin===e){l=c;break}if(0>l)continue;return this.wildcard?u._listeners.splice(l,1):this._events[t].splice(l,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[t]),this}(r===e||r.listener&&r.listener===e||r._origin&&r._origin===e)&&(this.wildcard?delete u._listeners:delete this._events[t])}return this},n.prototype.offAny=function(t){var e,r=0,n=0;if(t&&this._all&&this._all.length>0){for(e=this._all,r=0,n=e.length;n>r;r++)if(t===e[r])return e.splice(r,1),this}else this._all=[];return this},n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var r="string"==typeof t?t.split(this.delimiter):t.slice(),n=i.call(this,null,r,this.listenerTree,0),s=0;n.length>s;s++){var o=n[s];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},n.prototype.listeners=function(t){if(this.wildcard){var r=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return i.call(this,r,n,this.listenerTree,0),r}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),o(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},n.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return n}):t.EventEmitter2=n}(r!==undefined&&r.title!==undefined&&e!==undefined?e:window),l._.EventEmitter=t.exports.EventEmitter2}),r(function(t,e,r){(function(r){"object"==typeof e?t.exports=r():"function"==typeof define&&define.amd?define(r):"undefined"!=typeof window?window.Promise=r():"undefined"!=typeof global?global.Promise=r():"undefined"!=typeof self&&(self.Promise=r())})(function(){return function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw Error("Cannot find module '"+o+"'")}var l=r[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;n.length>o;o++)i(n[o]);return i}({1:[function(require,t){"use strict";t.exports=function(t,e,r){function n(t,r,n){var s=e(t,i,n,r===!0?t._boundTo:void 0);return s.setHowMany(1),s.setUnwrap(),s.promise()}var i=require("./some_promise_array.js")(r);t.any=function(e){return n(e,!1,t.any)},t.prototype.any=function(){return n(this,!0,this.any)}}},{"./some_promise_array.js":34}],2:[function(require,t){"use strict";t.exports=function(){var t=function(){function t(t){this.constructor$(t),this.message=t,this.name="AssertionError"}return t.prototype=Error(),t.prototype.constructor=t,t.prototype.constructor$=Error,t}();return function e(r,n){if(r!==!0){var i=new t(n);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),console&&console.error&&console.error(i.stack+""),i}}}()},{}],3:[function(require,t){"use strict";function e(){this._isTickUsed=!1,this._length=0,this._lateBuffer=new n,this._functionBuffer=new n(75e3);var t=this;this.consumeFunctionBuffer=function(){t._consumeFunctionBuffer()}}require("./assert.js");var r=require("./schedule.js"),n=require("./queue.js"),i=require("./util.js").errorObj,s=require("./util.js").tryCatch1;e.prototype.haveItemsQueued=function(){return this._length>0},e.prototype.invokeLater=function(t,e,r){this._lateBuffer.push(t,e,r),this._queueTick()},e.prototype.invoke=function(t,e,r){var n=this._functionBuffer;n.push(t,e,r),this._length=n.length(),this._queueTick()},e.prototype._consumeFunctionBuffer=function(){for(var t=this._functionBuffer;t.length()>0;){var e=t.shift(),r=t.shift(),n=t.shift();e.call(r,n)}this._reset(),this._consumeLateBuffer()},e.prototype._consumeLateBuffer=function(){for(var t=this._lateBuffer;t.length()>0;){var e=t.shift(),r=t.shift(),n=t.shift(),o=s(e,r,n);if(o===i)throw this._queueTick(),o.e}},e.prototype._queueTick=function(){this._isTickUsed||(r(this.consumeFunctionBuffer),this._isTickUsed=!0)},e.prototype._reset=function(){this._isTickUsed=!1,this._length=0},t.exports=new e},{"./assert.js":2,"./queue.js":26,"./schedule.js":30,"./util.js":36}],4:[function(require,t){"use strict";var e=require("./promise.js")();t.exports=e},{"./promise.js":18}],5:[function(require,t){"use strict";t.exports=function(t){function e(t){var e="string"==typeof this?this:""+this;return t[e]}t.prototype.call=function(t){for(var e=arguments.length,r=Array(e-1),n=1;e>n;++n)r[n-1]=arguments[n];return this._then(function(e){return e[t].apply(e,r)},void 0,void 0,void 0,void 0,this.call)},t.prototype.get=function(t){return this._then(e,void 0,void 0,t,void 0,this.get)}}},{}],6:[function(require,t){"use strict";t.exports=function(t){var e=require("./errors.js"),r=require("./async.js"),n=e.CancellationError;t.prototype.cancel=function(){if(!this.isCancellable())return this;for(var t=this;t._cancellationParent!==void 0;)t=t._cancellationParent;if(t===this){var e=new n;this._attachExtraTrace(e),this._reject(e)}else r.invoke(t.cancel,t,void 0);return this},t.prototype.uncancellable=function(){var e=new t;return e._setTrace(this.uncancellable,this),e._unsetCancellable(),e._assumeStateOf(this,!0),e._boundTo=this._boundTo,e},t.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0,this.fork);return n._cancellationParent=void 0,n}}},{"./async.js":3,"./errors.js":10}],7:[function(require,t){"use strict";t.exports=function(){function t(t,e){this.captureStackTrace(t,e)}require("./assert.js");var e=require("./util.js").inherits,r=RegExp("\\b(?:Promise(?:Array|Spawn)?\\$_\\w+|tryCatch(?:1|2|Apply)|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|nextTick|Async\\$\\w+)\\b"),n=null,i=null,s=!1;e(t,Error),t.prototype.captureStackTrace=function(t,e){o(this,t,e)},t.possiblyUnhandledRejection=function(t){if("object"==typeof console){var e=t.stack,r="Possibly unhandled "+i(e,t);"function"==typeof console.error||"object"==typeof console.error?console.error(r):("function"==typeof console.log||"object"==typeof console.error)&&console.log(r)}},s="CapturedTrace$captureStackTrace"!==t.prototype.captureStackTrace.name,t.combine=function(t,e){for(var i=t.length-1,s=e.length-1;s>=0;--s){var o=e[s];if(t[i]!==o)break;t.pop(),i--}t.push("From previous event:");for(var a=t.concat(e),u=[],s=0,l=a.length;l>s;++s)r.test(a[s])||s>0&&!n.test(a[s])&&"From previous event:"!==a[s]||u.push(a[s]);return u},t.isSupported=function(){return"function"==typeof o};var o=function a(){function t(t){var e=41;return e>t.length?t:t.substr(0,e-3)+"..."}function e(e){var r=""+e,n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(r))try{var i=JSON.stringify(e);r=i}catch(s){}return"(<"+t(r)+">, no stack trace)"}if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){n=/^\s*at\s*/,i=function(t,r){return"string"==typeof t?t:r.name!==void 0&&r.message!==void 0?r.name+". "+r.message:e(r)};var r=Error.captureStackTrace;return function(t,e,n){var i=-1;n||(i=Error.stackTraceLimit,Error.stackTraceLimit=Math.max(1,0|Math.min(1e4,i)/3)),r(t,e),n||(Error.stackTraceLimit=i)}}var o=Error();if(!s&&"string"==typeof o.stack&&"function"==typeof"".startsWith&&o.stack.startsWith("stackDetection@")&&"stackDetection"===a.name){Object.defineProperty(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),n=/@/;var u=/[@\n]/;return i=function(t,r){return"string"==typeof t?r.name+". "+r.message+"\n"+t:r.name!==void 0&&r.message!==void 0?r.name+". "+r.message:e(r)},function r(t,e){var r,n=e.name,i=Error().stack,s=i.split(u),o=s.length;for(r=0;o>r&&s[r]!==n;r+=2);s=s.slice(r+2),o=s.length-2;var a="";for(r=0;o>r;r+=2)a+=s[r],a+="@",a+=s[r+1],a+="\n";t.stack=a}}return i=function(t,r){return"string"==typeof t?t:"object"!=typeof r&&"function"!=typeof r||r.name===void 0||r.message===void 0?e(r):r.name+". "+r.message},null}();return t}},{"./assert.js":2,"./util.js":36}],8:[function(require,t){"use strict";function e(t,e,r){this._instances=t,this._callback=e,this._promise=r}function r(t,e){var r={},n=s(t,r,e);if(n===o)return n;var i=Object.keys(r);return i.length?(o.e=new TypeError("Catch filter must inherit from Error or be a simple predicate function"),o):n}var n=require("./errors.js").ensureNotHandled,i=require("./util.js"),s=i.tryCatch1,o=i.errorObj;e.prototype.doFilter=function(t){for(var e=this._callback,i=0,a=this._instances.length;a>i;++i){var u=this._instances[i],l=u===Error||null!=u&&u.prototype instanceof Error;if(l&&t instanceof u){var c=s(e,this._promise._boundTo,t);if(c===o)throw c.e;return c}if("function"==typeof u&&!l){var f=r(u,t);if(f===o){this._promise._attachExtraTrace(o.e),t=o.e;break}if(f){var c=s(e,this._promise._boundTo,t);if(c===o)throw c.e;return c}}}throw n(t),t},t.exports=e},{"./errors.js":10,"./util.js":36}],9:[function(require,t){"use strict";t.exports=function(t){function e(){this.errorObj=a,this.__id__=0,this.treshold=1e3,this.thenableCache=Array(this.treshold),this.promiseCache=Array(this.treshold),this._compactQueued=!1}function r(e,r,s){if(null!=r.promise)return r.promise;var o=t.pending(s),u=r.ref;if(u===a)return o.reject(u.e),o.promise;f.addCache(e,o.promise);var c=!1,h=l(u,e,function p(t){if(!c){c=!0,i.invoke(f.deleteCache,f,e);var r=n(t);r===t?o.fulfill(t):t===e?o.promise._resolveFulfill(t):r._then(o.fulfill,o.reject,void 0,o,void 0,p)}},function p(t){c||(c=!0,i.invoke(f.deleteCache,f,e),o.reject(t))});return h!==a||c||(o.reject(h.e),i.invoke(f.deleteCache,f,e)),o.promise}function n(e,i){if(u(e)){if(e instanceof t)return e;var s={ref:null,promise:null};if(f.is(e,s))return i="function"==typeof i?i:n,r(e,s,i)}return e}require("./assert.js");var i=require("./async.js"),s=require("./util.js"),o=s.isPrimitive,a=s.errorObj,u=s.isObject,l=s.tryCatch2;e.prototype.couldBe=function(t){if(o(t))return!1;var e=t.__id_$thenable__;return"number"==typeof e&&this.thenableCache[e]!==void 0?!0:"then"in t},e.prototype.is=function(t,e){var r=t.__id_$thenable__;return"number"==typeof r&&this.thenableCache[r]!==void 0?(e.ref=this.thenableCache[r],e.promise=this.promiseCache[r],!0):this._thenableSlowCase(t,e)},e.prototype.addCache=function(t,e){var r=this.__id__;this.__id__=r+1;var n=this._descriptor(r);Object.defineProperty(t,"__id_$thenable__",n),this.thenableCache[r]=t,this.promiseCache[r]=e,this.thenableCache.length>this.treshold&&!this._compactQueued&&(this._compactQueued=!0,i.invokeLater(this._compactCache,this,void 0))},e.prototype.deleteCache=function(t){var e=t.__id_$thenable__;-1!==e&&(this.thenableCache[e]=void 0,this.promiseCache[e]=void 0,t.__id_$thenable__=-1)};var c={value:0,enumerable:!1,writable:!0,configurable:!0};e.prototype._descriptor=function(t){return c.value=t,c},e.prototype._compactCache=function(){for(var t=this.thenableCache,e=this.promiseCache,r=0,n=0,i=0,s=t.length;s>i;++i){var o=t[i];o===void 0?r++:(e[n]=e[i],o.__id_$thenable__=n,t[n++]=o)}var a=t.length-r;if(a===this.__id__)this.treshold*=2;else for(var i=a,s=t.length;s>i;++i)e[n]=t[i]=void 0;this.__id__=a,this._compactQueued=!1},e.prototype._thenableSlowCase=function(t,e){try{var r=t.then;return"function"==typeof r?(e.ref=r,!0):!1}catch(n){return this.errorObj.e=n,e.ref=this.errorObj,!0}};var f=new e(a);t._couldBeThenable=function(t){return f.couldBe(t)},t.prototype._resolveThenable=function(e,r){if(null!=r.promise)return this._assumeStateOf(r.promise,!0),undefined;if(r.ref===a)this._attachExtraTrace(r.ref.e),i.invoke(this._reject,this,r.ref.e);else{f.addCache(e,this);var s=r.ref,o=e,u=this,c={},h=!1,p=function p(r){if(!h||this===c){h=!0;var s=u._fulfill,a=n(r);if(a!==r||a instanceof t&&a.isPending())return r===e?(i.invoke(s,u,r),i.invoke(f.deleteCache,f,o)):a._then(p,_,void 0,c,void 0,p),undefined;if(a instanceof t){var s=a.isFulfilled()?u._fulfill:u._reject;if(r=r._resolvedValue,a=n(r),a!==r||a instanceof t&&a!==r)return a._then(p,_,void 0,c,void 0,p),undefined}i.invoke(s,u,r),i.invoke(f.deleteCache,f,o)}},_=function _(r){if(!h||this===c){var s=u._reject;h=!0;var a=n(r);if(a!==r||a instanceof t&&a.isPending())return r===e?(i.invoke(s,u,r),i.invoke(f.deleteCache,f,o)):a._then(p,_,void 0,c,void 0,p),undefined;if(a instanceof t){var s=a.isFulfilled()?u._fulfill:u._reject;if(r=r._resolvedValue,a=n(r),a!==r||a instanceof t&&a.isPending())return a._then(p,_,void 0,c,void 0,p),undefined}i.invoke(s,u,r),i.invoke(f.deleteCache,f,o)}},v=l(s,e,p,_);v!==a||h||(this._attachExtraTrace(v.e),i.invoke(this._reject,this,v.e),i.invoke(f.deleteCache,f,e))}},t.prototype._tryThenable=function(t){var e;return f.is(t,e={ref:null,promise:null})?(this._resolveThenable(t,e),!0):!1},t._cast=n}},{"./assert.js":2,"./async.js":3,"./util.js":36}],10:[function(require,t){"use strict";function e(t){return(1&t)>0}function r(t){return(2&t)>0}function n(t){return 1|t}function i(t){return 2|t}function s(t){return-3&t}function o(t){var e;d(t)&&(e=t.__promiseHandled__)!==void 0&&(t.__promiseHandled__=s(e))}function a(t){try{return m(t,"__promiseHandled__",0),!0}catch(e){return!1}}function u(t){return t instanceof y}function l(t){if(u(t)){var r=t.__promiseHandled__;return r===void 0?a(t):!e(r)}return!1}function c(t,e){function r(r){this.message="string"==typeof r?r:e,this.name=t,y.captureStackTrace&&y.captureStackTrace(this,this.constructor)}return v(r,y),r}function f(t){this.name="RejectionError",this.message=t,this.cause=t,t instanceof y?(this.message=t.message,this.stack=t.stack):y.captureStackTrace&&y.captureStackTrace(this,this.constructor)}var h=require("./global.js"),p=h.Object.freeze,_=require("./util.js"),v=_.inherits,d=_.isObject,m=_.notEnumerableProp,y=h.Error,g=h.TypeError;"function"!=typeof g&&(g=c("TypeError","type error"));var j=c("CancellationError","cancellation error"),b=c("TimeoutError","timeout error");v(f,y);var w="__BluebirdErrorTypes__",E=h[w];E||(E=p({CancellationError:j,TimeoutError:b,RejectionError:f}),m(h,w,E)),t.exports={Error:y,TypeError:g,CancellationError:E.CancellationError,RejectionError:E.RejectionError,TimeoutError:E.TimeoutError,attachDefaultState:a,ensureNotHandled:o,withHandledUnmarked:s,withHandledMarked:i,withStackAttached:n,isStackAttached:e,isHandled:r,canAttach:l}},{"./global.js":14,"./util.js":36}],11:[function(require,t){"use strict";t.exports=function(t){function e(e){var n=new r(e),i=t.rejected(n),s=i._peekContext();return null!=s&&s._attachExtraTrace(n),i}var r=require("./errors.js").TypeError;return e}},{"./errors.js":10}],12:[function(require,t){"use strict";t.exports=function(t,e,r,n){function i(t){var e=this,r=void 0;"function"!=typeof e&&(r=e.receiver,e=e.fn);var n=Array(t.length),i=0;if(r===void 0)for(var s=0,o=t.length;o>s;++s){var a=t[s];(a!==void 0||s in t)&&e(a,s,o)&&(n[i++]=a)}else for(var s=0,o=t.length;o>s;++s){var a=t[s];(a!==void 0||s in t)&&e.call(r,a,s,o)&&(n[i++]=a)}return n.length=i,n}function s(t,s,o,a){return"function"!=typeof s?n("fn is not a function"):(o===!0&&(s={fn:s,receiver:t._boundTo}),e(t,r,a,o===!0?t._boundTo:void 0).promise()._then(i,void 0,void 0,s,void 0,a))}require("./assert.js"),t.filter=function(e,r){return s(e,r,!1,t.filter)},t.prototype.filter=function(t){return s(this,t,!0,this.filter)}}},{"./assert.js":2}],13:[function(require,t){"use strict";t.exports=function(t,e){var r=require("./promise_spawn.js")(t),n=require("./errors.js"),i=n.TypeError;t.coroutine=function(t){if("function"!=typeof t)throw new i("generatorFunction must be a function");var e=r;return function n(){var r=t.apply(this,arguments),i=new e(void 0,void 0,n);return i._generator=r,i._next(void 0),i.promise()}},t.spawn=function(n){if("function"!=typeof n)return e("generatorFunction must be a function");var i=new r(n,this,t.spawn),s=i.promise();return i._run(t.spawn),s}}},{"./errors.js":10,"./promise_spawn.js":22}],14:[function(require,t){"use strict";t.exports=function(){return this!==undefined?this:r!==undefined&&"undefined"!=typeof global&&"string"==typeof r.execPath?global:"undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator&&null!==navigator&&"string"==typeof navigator.appName?window:undefined}()},{}],15:[function(require,t){"use strict";t.exports=function(t,e,r,n){function i(n){var s=this,o=void 0;"function"!=typeof s&&(o=s.receiver,s=s.fn);var a=!1;if(o===void 0){for(var u=0,l=n.length;l>u;++u)if(n[u]!==void 0||u in n){var c=s(n[u],u,l);if(!a&&t.is(c)){if(c.isFulfilled()){n[u]=c._resolvedValue;continue}a=!0}n[u]=c}}else for(var u=0,l=n.length;l>u;++u)if(n[u]!==void 0||u in n){var c=s.call(o,n[u],u,l);if(!a&&t.is(c)){if(c.isFulfilled()){n[u]=c._resolvedValue;continue}a=!0}n[u]=c}return a?e(n,r,i,void 0).promise():n}function s(t,s,o,a){return"function"!=typeof s?n("fn is not a function"):(o===!0&&(s={fn:s,receiver:t._boundTo}),e(t,r,a,o===!0?t._boundTo:void 0).promise()._then(i,void 0,void 0,s,void 0,a))}require("./assert.js"),t.prototype.map=function(t){return s(this,t,!0,this.map)},t.map=function(e,r){return s(e,r,!1,t.map)}}},{"./assert.js":2}],16:[function(require,t){"use strict";t.exports=function(t){function e(t){throw t}function r(t,r){var n=this,i=o(n,r,null,t);i===u&&s.invokeLater(e,void 0,i.e)}function n(t,r){var n=this,i=a(n,r,t);i===u&&s.invokeLater(e,void 0,i.e)}var i=require("./util.js"),s=require("./async.js");require("./assert.js");var o=i.tryCatch2,a=i.tryCatch1,u=i.errorObj;t.prototype.nodeify=function(t){return"function"==typeof t&&this._then(r,n,void 0,t,this._isBound()?this._boundTo:null,this.nodeify),this}}},{"./assert.js":2,"./async.js":3,"./util.js":36}],17:[function(require,t){"use strict";t.exports=function(t){require("./assert.js");var e=require("./util.js"),r=require("./async.js"),n=e.tryCatch1,i=e.errorObj;t.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0,this.progressed)},t.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._resolveProgress(t)},t.prototype._progressAt=function(t){return 0===t?this._progress0:this[t+2-5]},t.prototype._resolveProgress=function(e){for(var s=this._length(),o=0;s>o;o+=5){var a=this._progressAt(o),u=this._promiseAt(o);if(t.is(u)){var l=e;a!==void 0?(this._pushContext(),l=n(a,this._receiverAt(o),e),this._popContext(),l===i?null!=l.e&&"StopProgressPropagation"===l.e.name?l.e.__promiseHandled__=2:(u._attachExtraTrace(l.e),r.invoke(u._progress,u,l.e)):t.is(l)?l._then(u._progress,null,null,u,void 0,this._progress):r.invoke(u._progress,u,l)):r.invoke(u._progress,u,l)}else a.call(this._receiverAt(o),e,u)}}}},{"./assert.js":2,"./async.js":3,"./util.js":36}],18:[function(require,t){"use strict";t.exports=function(){function t(t){return"object"!=typeof t?!1:t instanceof e}function e(t){this._bitField=67108864,this._fulfill0=void 0,this._reject0=void 0,this._progress0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolvedValue=void 0,this._cancellationParent=void 0,this._boundTo=void 0,V&&(this._traceParent=this._peekContext()),"function"==typeof t&&this._resolveResolver(t)}function r(t){throw t}function n(t,e){return this.isFulfilled()?t._then(function(){return e},r,void 0,this,void 0,n):t._then(function(){throw A(e),e},r,void 0,this,void 0,n)}function i(t,e,r){return s(t,c,r,e===!0?t._boundTo:void 0).promise()}function s(e,r,n,i){return t(e)||_(e)?new r(e,"function"==typeof n?n:s,i):new r([P("expecting an array or a promise")],n,i)}var o=require("./global.js");require("./assert.js");var a=require("./util.js"),u=require("./async.js"),l=require("./errors.js"),c=require("./promise_array.js")(e),f=require("./captured_trace.js")(),h=require("./catch_filter.js"),p=require("./promise_resolver.js"),_=a.isArray,v=a.notEnumerableProp,d=a.isObject,m=a.ensurePropertyExpansion,y=a.errorObj,g=a.tryCatch1,j=a.tryCatch2,b=a.tryCatchApply,w=l.TypeError,E=l.CancellationError,k=l.TimeoutError,x=l.RejectionError,A=l.ensureNotHandled,T=l.withHandledMarked,C=l.withStackAttached,F=l.isStackAttached,R=l.isHandled,O=l.canAttach,P=require("./errors_api_rejection")(e),S={};e.prototype.bind=function(t){var r=new e;return r._setTrace(this.bind,this),r._assumeStateOf(this,!0),r._setBoundTo(t),r},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var r,n=Array(e-1),i=0;for(r=0;e-1>r;++r){var s=arguments[r];if("function"!=typeof s){var o=new w("A catch filter must be an error constructor or a filter function");return this._attachExtraTrace(o),u.invoke(this._reject,this,o),undefined}n[i++]=s}n.length=i,t=arguments[r],this._resetTrace(this.caught);var a=new h(n,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0,this.caught)}return this._then(void 0,t,void 0,void 0,void 0,this.caught)},e.prototype.lastly=e.prototype["finally"]=function(e){var r=function(r){var i=this._isBound()?e.call(this._boundTo):e();if(t(i))return n.call(this,i,r);if(this.isRejected())throw A(r),r;return r};return this._then(r,r,void 0,this,void 0,this.lastly)},e.prototype.then=function(t,e,r){return this._then(t,e,r,void 0,void 0,this.then)},e.prototype.done=function(t,e,r){var n=this._then(t,e,r,void 0,void 0,this.done);n._setIsFinal()},e.prototype.spread=function(t,e){return this._then(t,e,void 0,S,void 0,this.spread)},e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=function(){return!this.isResolved()},e.prototype.isResolved=function(){return(402653184&this._bitField)>0},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this._resolvedValue,t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this._resolvedValue,t.isRejected=!0),t},e.prototype.all=function(){return i(this,!0,this.all)},e.is=t,e.all=function(t){return i(t,!1,e.all)},e.join=function(){for(var t=arguments.length,r=Array(t),n=0;t>n;++n)r[n]=arguments[n];return s(r,c,e.join,void 0).promise()},e.fulfilled=function(t,r){var n=new e;return n._setTrace("function"==typeof r?r:e.fulfilled,void 0),n._tryAssumeStateOf(t,!1)?n:(n._cleanValues(),n._setFulfilled(),n._resolvedValue=t,n)},e.rejected=function(t){var r=new e;return r._setTrace(e.rejected,void 0),r._cleanValues(),r._setRejected(),r._resolvedValue=t,r},e["try"]=e.attempt=function(t,r,n){if("function"!=typeof t)return P("fn must be a function");var i=_(r)?b(t,r,n):g(t,n,r),s=new e;if(s._setTrace(e.attempt,void 0),i===y)return s._cleanValues(),s._setRejected(),s._resolvedValue=i.e,s;var o=e._cast(i);return o instanceof e?s._assumeStateOf(o,!0):(s._cleanValues(),s._setFulfilled(),s._resolvedValue=i),s},e.pending=function(t){var r=new e;return r._setTrace("function"==typeof t?t:e.pending,void 0),new p(r)},e.bind=function(t){var r=new e;return r._setTrace(e.bind,void 0),r._setFulfilled(),r._setBoundTo(t),r},e.cast=function(t,r){var n=e._cast(t,r);return n instanceof e?n:e.fulfilled(n,r)},e.onPossiblyUnhandledRejection=function(t){f.possiblyUnhandledRejection="function"==typeof t?t:void 0};var V=true;e.longStackTraces=function(){if(u.haveItemsQueued()&&V===!1)throw Error("Cannot enable long stack traces after promises have been created");V=!0},e.hasLongStackTraces=function(){return V},e.prototype._then=function(t,r,n,i,s,o){var a=s!==void 0,l=a?s:new e;if(V&&!a){var c=this._peekContext()===this._traceParent;l._traceParent=c?this._traceParent:this,l._setTrace("function"==typeof o?o:this._then,this)}a||(l._boundTo=this._boundTo);var f=this._addCallbacks(t,r,n,l,i);if(this.isResolved()?u.invoke(this._resolveLast,this,f):!a&&this.isCancellable()&&(l._cancellationParent=this),this._isDelegated()){this._unsetDelegated();var h=this._resolvedValue;this._tryThenable(h)||u.invoke(this._fulfill,this,h)}return l},e.prototype._length=function(){return 16777215&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0
},e.prototype._setLength=function(t){this._bitField=-16777216&this._bitField|16777215&t},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setDelegated=function(){this._bitField=-1073741824|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._isDelegated=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._unsetDelegated=function(){this._bitField=1073741823&this._bitField},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._receiverAt=function(t){var e;return e=0===t?this._receiver0:this[t+4-5],this._isBound()&&e===void 0?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[t+3-5]},e.prototype._fulfillAt=function(t){return 0===t?this._fulfill0:this[t+0-5]},e.prototype._rejectAt=function(t){return 0===t?this._reject0:this[t+1-5]},e.prototype._unsetAt=function(t){0===t?this._fulfill0=this._reject0=this._progress0=this._promise0=this._receiver0=void 0:this[t-5+0]=this[t-5+1]=this[t-5+2]=this[t-5+3]=this[t-5+4]=void 0},e.prototype._resolveResolver=function(t){this._setTrace(this._resolveResolver,void 0);var e=new p(this);this._pushContext();var r=j(t,this,function(t){e.fulfill(t)},function(t){e.reject(t)});this._popContext(),r===y&&e.reject(r.e)},e.prototype._addCallbacks=function(t,e,r,n,i){t="function"==typeof t?t:void 0,e="function"==typeof e?e:void 0,r="function"==typeof r?r:void 0;var s=this._length();return 0===s?(this._fulfill0=t,this._reject0=e,this._progress0=r,this._promise0=n,this._receiver0=i,this._setLength(s+5),s):(this[s-5+0]=t,this[s-5+1]=e,this[s-5+2]=r,this[s-5+3]=n,this[s-5+4]=i,this._setLength(s+5),s)},e.prototype._spreadSlowCase=function(t,e,r,n){e._assumeStateOf(s(r,c,this._spreadSlowCase,n).promise()._then(function(){return t.apply(n,arguments)},void 0,void 0,S,void 0,this._spreadSlowCase),!1)},e.prototype._setBoundTo=function(t){this._boundTo=t},e.prototype._isBound=function(){return this._boundTo!==void 0};var L=h.prototype.doFilter;e.prototype._resolvePromise=function(r,n,i,s){var o=this.isRejected();if(o&&"object"==typeof i&&null!==i){var a=i.__promiseHandled__;a===void 0?v(i,"__promiseHandled__",2):i.__promiseHandled__=T(a)}if(!t(s))return r.call(n,i,s);var l;if(o||n!==S)s._pushContext(),l=g(r,n,i);else{if(!_(i))return this._spreadSlowCase(r,s,i,this._boundTo),undefined;for(var c=0,f=i.length;f>c;++c)if(t(e._cast(i[c])))return this._spreadSlowCase(r,s,i,this._boundTo),undefined;s._pushContext(),l=b(r,i,this._boundTo)}if(s._popContext(),l===y)A(l.e),r!==L&&s._attachExtraTrace(l.e),u.invoke(s._reject,s,l.e);else if(l===s){var h=new w("Circular thenable chain");this._attachExtraTrace(h),u.invoke(s._reject,s,h)}else{if(s._tryAssumeStateOf(l,!0))return;if(e._couldBeThenable(l)){if(0===s._length())return s._resolvedValue=l,s._setDelegated(),undefined;if(s._tryThenable(l))return}u.invoke(s._fulfill,s,l)}},e.prototype._assumeStateOf=function(t,e){this._setFollowing(),t.isPending()?(t._cancellable()&&(this._cancellationParent=t),t._then(this._resolveFulfill,this._resolveReject,this._resolveProgress,this,void 0,this._tryAssumeStateOf)):t.isFulfilled()?e===!0?u.invoke(this._resolveFulfill,this,t._resolvedValue):this._resolveFulfill(t._resolvedValue):e===!0?u.invoke(this._resolveReject,this,t._resolvedValue):this._resolveReject(t._resolvedValue),V&&null==t._traceParent&&(t._traceParent=this)},e.prototype._tryAssumeStateOf=function(e,r){return!t(e)||this._isFollowingOrFulfilledOrRejected()?!1:(this._assumeStateOf(e,r),!0)},e.prototype._resetTrace=function(t){if(V){var e=this._peekContext(),r=e===void 0;this._trace=new f("function"==typeof t?t:this._resetTrace,r)}},e.prototype._setTrace=function(t,e){if(V){var r=this._peekContext(),n=r===void 0;this._trace=e!==void 0&&e._traceParent===r?e._trace:new f("function"==typeof t?t:this._setTrace,n)}return this},e.prototype._attachExtraTrace=function(t){if(V&&O(t)){var e=this,r=t.stack;r="string"==typeof r?r.split("\n"):[];for(var n=1;null!=e&&null!=e._trace;)r=f.combine(r,e._trace.stack.split("\n")),e=e._traceParent;var i=Error.stackTraceLimit+n,s=r.length;s>i&&(r.length=i),t.stack=n>=r.length?"(No stack trace)":r.join("\n"),t.__promiseHandled__=C(t.__promiseHandled__)}},e.prototype._notifyUnhandledRejection=function(t){R(t.__promiseHandled__)||(t.__promiseHandled__=T(t.__promiseHandled__),f.possiblyUnhandledRejection(t,this))},e.prototype._unhandledRejection=function(t){R(t.__promiseHandled__)||u.invokeLater(this._notifyUnhandledRejection,this,t)},e.prototype._cleanValues=function(){this._cancellationParent=void 0},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._resolveFulfill(t)},e.prototype._reject=function(t){this._isFollowingOrFulfilledOrRejected()||this._resolveReject(t)},e.prototype._doResolveAt=function(t){var e=this.isFulfilled()?this._fulfillAt(t):this._rejectAt(t),r=this._resolvedValue,n=this._receiverAt(t),i=this._promiseAt(t);this._unsetAt(t),this._resolvePromise(e,n,r,i)},e.prototype._resolveFulfill=function(t){this._cleanValues(),this._setFulfilled(),this._resolvedValue=t;var e=this._length();this._setLength(0);for(var r=0;e>r;r+=5)if(this._fulfillAt(r)!==void 0)u.invoke(this._doResolveAt,this,r);else{var n=this._promiseAt(r);this._unsetAt(r),u.invoke(n._fulfill,n,t)}},e.prototype._resolveLast=function(t){this._setLength(0);var e;if(e=this.isFulfilled()?this._fulfillAt(t):this._rejectAt(t),e!==void 0)u.invoke(this._doResolveAt,this,t);else{var r=this._promiseAt(t),n=this._resolvedValue;this._unsetAt(t),this.isFulfilled()?u.invoke(r._fulfill,r,n):u.invoke(r._reject,r,n)}},e.prototype._resolveReject=function(t){if(this._cleanValues(),this._setRejected(),this._resolvedValue=t,this._isFinal())return u.invokeLater(r,void 0,t),undefined;var e=this._length();this._setLength(0);for(var n=!1,i=0;e>i;i+=5)if(this._rejectAt(i)!==void 0)n=!0,u.invoke(this._doResolveAt,this,i);else{var s=this._promiseAt(i);this._unsetAt(i),n||(n=s._length()>0),u.invoke(s._reject,s,t)}if(!n&&f.possiblyUnhandledRejection!==void 0&&d(t)){var o=t.__promiseHandled__,a=t;if(o===void 0)a=m(t,"__promiseHandled__",0),o=0;else if(R(o))return;F(o)||this._attachExtraTrace(a),u.invoke(this._unhandledRejection,this,a)}};var M=[];e.prototype._peekContext=function(){var t=M.length-1;return t>=0?M[t]:void 0},e.prototype._pushContext=function(){V&&M.push(this)},e.prototype._popContext=function(){V&&M.pop()};var $=o.Promise;return e.noConflict=function(){return o.Promise===e&&(o.Promise=$),e},f.isSupported()||(e.longStackTraces=function(){},V=!1),e.CancellationError=E,e.TimeoutError=k,e.TypeError=w,e.RejectionError=x,require("./synchronous_inspection.js")(e),require("./any.js")(e,s,c),require("./race.js")(e,s,c),require("./call_get.js")(e),require("./filter.js")(e,s,c,P),require("./generators.js")(e,P),require("./map.js")(e,s,c,P),require("./nodeify.js")(e),require("./promisify.js")(e),require("./props.js")(e,c),require("./reduce.js")(e,s,c,P),require("./settle.js")(e,s,c),require("./some.js")(e,s,c,P),require("./progress.js")(e),require("./cancel.js")(e),require("./complex_thenables.js")(e),e.prototype=e.prototype,e}},{"./any.js":1,"./assert.js":2,"./async.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./complex_thenables.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":12,"./generators.js":13,"./global.js":14,"./map.js":15,"./nodeify.js":16,"./progress.js":17,"./promise_array.js":19,"./promise_resolver.js":21,"./promisify.js":23,"./props.js":25,"./race.js":27,"./reduce.js":29,"./settle.js":31,"./some.js":33,"./synchronous_inspection.js":35,"./util.js":36}],19:[function(require,t){"use strict";t.exports=function(t){function e(t){switch(t){case 0:return void 0;case 1:return[];case 2:return{}}}function r(e,r,n){this._values=e,this._resolver=t.pending(r),n!==void 0&&this._resolver.promise._setBoundTo(n),this._length=0,this._totalResolved=0,this._init(void 0,1)}require("./assert.js");var n=require("./errors.js").ensureNotHandled,i=require("./util.js"),s=require("./async.js"),o={}.hasOwnProperty,a=i.isArray;return r.PropertiesPromiseArray=function(){},r.prototype.length=function(){return this._length},r.prototype.promise=function(){return this._resolver.promise},r.prototype._init=function(n,i){var u=this._values;if(t.is(u)){if(!u.isFulfilled())return u.isPending()?(u._then(this._init,this._reject,void 0,this,i,this.constructor),undefined):(this._reject(u._resolvedValue),undefined);if(u=u._resolvedValue,!a(u))return this._fulfill(e(i)),undefined;this._values=u}if(0===u.length)return this._fulfill(e(i)),undefined;var l,c=u.length,f=c;l=this instanceof r.PropertiesPromiseArray?this._values:Array(c);for(var h=!1,p=0;c>p;++p){var _=u[p];if(_!==void 0||o.call(u,p)){var v=t._cast(_);v instanceof t&&v.isPending()?v._then(this._promiseFulfilled,this._promiseRejected,this._promiseProgressed,this,p,this._scanDirectValues):h=!0,l[p]=v}else f--}if(0===f)return 1===i?this._fulfill(l):this._fulfill(e(i)),undefined;if(this._values=l,this._length=f,h){var d=f===c?this._scanDirectValues:this._scanDirectValuesHoled;s.invoke(d,this,c)}},r.prototype._resolvePromiseAt=function(e){var r=this._values[e];t.is(r)?r.isFulfilled()?this._promiseFulfilled(r._resolvedValue,e):r.isRejected()&&this._promiseRejected(r._resolvedValue,e):this._promiseFulfilled(r,e)},r.prototype._scanDirectValuesHoled=function(t){for(var e=0;t>e&&!this._isResolved();++e)o.call(this._values,e)&&this._resolvePromiseAt(e)},r.prototype._scanDirectValues=function(t){for(var e=0;t>e&&!this._isResolved();++e)this._resolvePromiseAt(e)},r.prototype._isResolved=function(){return null===this._values},r.prototype._fulfill=function(t){this._values=null,this._resolver.fulfill(t)},r.prototype._reject=function(t){n(t),this._values=null,this._resolver.reject(t)},r.prototype._promiseProgressed=function(t,e){this._isResolved()||this._resolver.progress({index:e,value:t})},r.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._fulfill(this._values)}},r.prototype._promiseRejected=function(t){this._isResolved()||(this._totalResolved++,this._reject(t))},r}},{"./assert.js":2,"./async.js":3,"./errors.js":10,"./util.js":36}],20:[function(require,t){"use strict";function e(t){t!==void 0?(this._bitField=t._bitField,this._resolvedValue=t.isResolved()?t._resolvedValue:void 0):(this._bitField=0,this._resolvedValue=void 0)}var r=require("./errors.js").TypeError;e.prototype.isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=function(){return 0===(402653184&this._bitField)},e.prototype.value=function(){if(!this.isFulfilled())throw new r("cannot get fulfillment value of a non-fulfilled promise");return this._resolvedValue},e.prototype.error=function(){if(!this.isRejected())throw new r("cannot get rejection reason of a non-rejected promise");return this._resolvedValue},t.exports=e},{"./errors.js":10}],21:[function(require,t){"use strict";function e(t){return t instanceof Error&&Object.getPrototypeOf(t)===Error.prototype}function r(t){return e(t)?new l(t):t}function n(t){function e(e,n){if(e)t.reject(r(o(e)));else if(arguments.length>2){for(var i=arguments.length,s=Array(i-1),a=1;i>a;++a)s[a-1]=arguments[a];t.fulfill(s)}else t.fulfill(n)}return e}var i,s=require("./util.js"),o=s.maybeWrapAsError,a=require("./errors.js"),u=a.TimeoutError,l=a.RejectionError,c=require("./async.js"),f=s.haveGetters;i=f?function i(t){this.promise=t}:function i(t){this.promise=t,this.asCallback=n(this)},f&&Object.defineProperty(i.prototype,"asCallback",{get:function(){return n(this)}}),i._nodebackForResolver=n,i.prototype.toString=function(){return"[object PromiseResolver]"},i.prototype.fulfill=function(t){this.promise._tryAssumeStateOf(t,!1)||c.invoke(this.promise._fulfill,this.promise,t)},i.prototype.reject=function(t){this.promise._attachExtraTrace(t),c.invoke(this.promise._reject,this.promise,t)},i.prototype.progress=function(t){c.invoke(this.promise._progress,this.promise,t)},i.prototype.cancel=function(){c.invoke(this.promise.cancel,this.promise,void 0)},i.prototype.timeout=function(){this.reject(new u("timeout"))},i.prototype.isResolved=function(){return this.promise.isResolved()},i.prototype.toJSON=function(){return this.promise.toJSON()},t.exports=i},{"./async.js":3,"./errors.js":10,"./util.js":36}],22:[function(require,t){"use strict";t.exports=function(t){function e(e,r,n){this._resolver=t.pending(n),this._generatorFunction=e,this._receiver=r,this._generator=void 0}var r=require("./errors.js"),n=r.TypeError,i=r.ensureNotHandled,s=require("./util.js"),o=s.isArray,a=s.errorObj,u=s.tryCatch1;return e.prototype.promise=function(){return this._resolver.promise},e.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},e.prototype._continue=function l(e){if(e===a)return this._generator=void 0,this._resolver.reject(e.e),undefined;var r=e.value;if(e.done===!0)this._generator=void 0,this._resolver.fulfill(r);else{var i=t._cast(r,l);if(!(i instanceof t)){if(!o(i))return this._throw(new n("A value was yielded that could not be treated as a promise")),undefined;i=t.all(i)}i._then(this._next,this._throw,void 0,this,null,void 0)}},e.prototype._throw=function(t){i(t),this.promise()._attachExtraTrace(t),this._continue(u(this._generator["throw"],this._generator,t))},e.prototype._next=function(t){this._continue(u(this._generator.next,this._generator,t))},e}},{"./errors.js":10,"./util.js":36}],23:[function(require,t){"use strict";t.exports=function(t){function e(e,r,n){function i(t){for(var n=Array(t),i=0,s=n.length;s>i;++i)n[i]="a"+(i+1);var a=t>0?",":"";return"string"==typeof e&&r===o?"this['"+e+"']("+n.join(",")+a+" fn);"+"break;":(r===void 0?"callback("+n.join(",")+a+" fn);":"callback.call("+(r===o?"this":"receiver")+", "+n.join(",")+a+" fn);")+"break;"}function s(){return"var args = new Array( len + 1 );var i = 0;for( var i = 0; i < len; ++i ) {    args[i] = arguments[i];}args[i] = fn;"}var a="string"==typeof n?n+"Async":"promisified";return Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForResolver","var ret = function "+a+'( a1, a2, a3, a4, a5 ) {"use strict";'+"var len = arguments.length;"+"var resolver = Promise.pending( "+a+" );"+"var fn = nodebackForResolver( resolver );"+"try{"+"switch( len ) {"+"case 1:"+i(1)+"case 2:"+i(2)+"case 3:"+i(3)+"case 0:"+i(0)+"case 4:"+i(4)+"case 5:"+i(5)+"default: "+s()+("string"==typeof e?"this['"+e+"'].apply(":"callback.apply(")+(r===o?"this":"receiver")+", args ); break;"+"}"+"}"+"catch(e){ "+"resolver.reject( maybeWrapAsError( e ) );"+"}"+"return resolver.promise;"+"}; ret.__isPromisified__ = true; return ret;")(t,e,r,f,h,l)}function r(e,r){function n(){var i=r;r===o&&(i=this),"string"==typeof e&&(e=i[e]);var s=t.pending(n),a=l(s);try{e.apply(i,f(arguments,a))}catch(u){s.reject(h(u))}return s.promise}return n.__isPromisified__=!0,n}function n(){}function i(t){return t.__isPromisified__===!0}function s(t,e,r){if(r){var s=0,a={};for(var u in t)if(!y.test(u)&&!m.call(t,u+"__beforePromisified__")&&"function"==typeof t[u]){var l=t[u];if(!i(l)){s++;var c=u+"__beforePromisified__",f=u+"Async";_(t,c,l),a[f]=d(c,o,u)}}if(s>0){for(var u in a)m.call(a,u)&&(t[u]=a[u]);n.prototype=t}return t}return d(t,e,void 0)}var o={},a=require("./util.js"),u=require("./errors.js"),l=require("./promise_resolver.js")._nodebackForResolver,c=u.RejectionError,f=a.withAppended,h=a.maybeWrapAsError,p=a.canEvaluate,_=a.notEnumerableProp,v=a.deprecated;require("./assert.js"),t.prototype.error=function(t){return this.caught(c,t)};var d=p?e:r,m={}.hasOwnProperty,y=RegExp("__beforePromisified__$");t.promisify=function(t,e){if("object"==typeof t&&null!==t)return v("Promise.promisify for promisifying entire objects is deprecated. Use Promise.promisifyAll instead."),s(t,e,!0);if("function"!=typeof t)throw new TypeError("callback must be a function");return i(t)?t:s(t,2>arguments.length?o:e,!1)},t.promisifyAll=function(t){if("function"!=typeof t&&"object"!=typeof t)throw new TypeError("Cannot promisify "+typeof t);return s(t,void 0,!0)}}},{"./assert.js":2,"./errors.js":10,"./promise_resolver.js":21,"./util.js":36}],24:[function(require,t){"use strict";t.exports=function(t,e){function r(t,e,r){for(var n=Object.keys(t),i=Array(n.length),s=0,o=i.length;o>s;++s)i[s]=t[n[s]];if(this.constructor$(i,e,r),!this._isResolved())for(var s=0,o=n.length;o>s;++s)i.push(n[s])}require("./assert.js");var n=require("./util.js"),i=n.inherits;return i(r,e),r.prototype._init=function(){this._init$(void 0,2)},r.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){this._values[e]=t;var r=++this._totalResolved;if(r>=this._length){for(var n={},i=this.length(),s=0,o=this.length();o>s;++s)n[this._values[s+i]]=this._values[s];this._fulfill(n)}}},r.prototype._promiseProgressed=function(t,e){this._isResolved()||this._resolver.progress({key:this._values[e+this.length()],value:t})},e.PropertiesPromiseArray=r,r}},{"./assert.js":2,"./util.js":36}],25:[function(require,t){"use strict";t.exports=function(t,e){function r(e,r,i){var o;return s(e)?o=t.fulfilled(e,i):t.is(e)?o=e._then(t.props,void 0,void 0,void 0,void 0,i):(o=new n(e,i,r===!0?e._boundTo:void 0).promise(),r=!1),r===!0&&(o._boundTo=e._boundTo),o}var n=require("./properties_promise_array.js")(t,e),i=require("./util.js"),s=i.isPrimitive;t.prototype.props=function(){return r(this,!0,this.props)},t.props=function(e){return r(e,!1,t.props)}}},{"./properties_promise_array.js":24,"./util.js":36}],26:[function(require,t){"use strict";function e(t,e,r,n,i){for(var s=0;i>s;++s)r[s+n]=t[s+e]}function r(t){return t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+1}function n(t){return"number"!=typeof t?16:r(Math.min(Math.max(16,t),1073741824))}function i(t){this._capacity=n(t),this._length=0,this._front=0,this._makeCapacity()}require("./assert.js"),i.prototype._willBeOverCapacity=function(t){return t>this._capacity},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),this._pushOne(r),undefined;var i=this._front+n-3;this._checkCapacity(n);var s=this._capacity-1;this[i+0&s]=t,this[i+1&s]=e,this[i+2&s]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._makeCapacity=function(){for(var t=this._capacity,e=0;t>e;++e)this[e]=void 0},i.prototype._checkCapacity=function(t){t>this._capacity&&this._resizeTo(this._capacity<<3)},i.prototype._resizeTo=function(t){var r=this._front,n=this._capacity,i=Array(n),s=this.length();if(e(this,0,i,0,n),this._capacity=t,this._makeCapacity(),this._front=0,n>=r+s)e(i,r,this,0,s);else{var o=s-(r+s&n-1);e(i,r,this,0,o),e(i,0,this,o,s-o)}},t.exports=i},{"./assert.js":2}],27:[function(require,t){"use strict";t.exports=function(t,e,r){function n(t,r,n){return e(t,i,n,r===!0?t._boundTo:void 0).promise()}var i=require("./race_promise_array.js")(t,r);t.race=function(e){return n(e,!1,t.race)},t.prototype.race=function(){return n(this,!0,this.race)}}},{"./race_promise_array.js":28}],28:[function(require,t){"use strict";t.exports=function(t,e){function r(t,e,r){this.constructor$(t,e,r)}var n=require("./util.js"),i=n.inherits;return i(r,e),r.prototype._init=function(){this._init$(void 0,0)},r.prototype._promiseFulfilled=function(t){this._isResolved()||this._fulfill(t)},r.prototype._promiseRejected=function(t){this._isResolved()||this._reject(t)},r}},{"./util.js":36}],29:[function(require,t){"use strict";t.exports=function(t,e,r,n){function i(t,e){var r=this,n=void 0;"function"!=typeof r&&(n=r.receiver,r=r.fn);var i=t.length,s=void 0,o=0;if(e!==void 0)s=e,o=0;else if(o=1,i>0)for(var a=0;i>a;++a)if(t[a]!==void 0||a in t){s=t[a],o=a+1;break}if(n===void 0)for(var a=o;i>a;++a)(t[a]!==void 0||a in t)&&(s=r(s,t[a],a,i));else for(var a=o;i>a;++a)(t[a]!==void 0||a in t)&&(s=r.call(n,s,t[a],a,i));return s}function s(t){var e=this.fn,r=this.initialValue;return i.call(e,t,r)}function o(t,e,r,n,i){return r._then(function s(r){return a(t,e,r,n,s)},void 0,void 0,void 0,void 0,i)}function a(a,u,l,c,f){if("function"!=typeof u)return n("fn is not a function");if(c===!0&&(u={fn:u,receiver:a._boundTo}),l!==void 0){if(t.is(l)){if(!l.isFulfilled())return o(a,u,l,c,f);l=l._resolvedValue}return e(a,r,f,c===!0?a._boundTo:void 0).promise()._then(s,void 0,void 0,{fn:u,initialValue:l},void 0,t.reduce)}return e(a,r,f,c===!0?a._boundTo:void 0).promise()._then(i,void 0,void 0,u,void 0,f)}require("./assert.js"),t.reduce=function(e,r,n){return a(e,r,n,!1,t.reduce)},t.prototype.reduce=function(t,e){return a(this,t,e,!0,this.reduce)}}},{"./assert.js":2}],30:[function(require,t){"use strict";var e=require("./global.js");require("./assert.js");var n;if(r!==undefined&&null!==r&&"function"==typeof r.cwd)n=e.setImmediate!==undefined?function(t){e.setImmediate(t)}:function(t){r.nextTick(t)};else if("function"!=typeof MutationObserver&&"function"!=typeof WebkitMutationObserver&&"function"!=typeof WebKitMutationObserver||"undefined"==typeof document||"function"!=typeof document.createElement)if("function"==typeof e.postMessage&&"function"!=typeof e.importScripts&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){var i="bluebird_message_key_"+Math.random();n=function(){function t(t){if(t.source===e&&t.data===i){var n=r;r=void 0,n()}}var r=void 0;return e.addEventListener("message",t,!1),function t(t){r=t,e.postMessage(i,"*")}}()}else n="function"==typeof MessageChannel?function(){var t=void 0,e=new MessageChannel;return e.port1.onmessage=function(){var e=t;t=void 0,e()},function(r){t=r,e.port2.postMessage(null)}}():e.setTimeout?function(t){setTimeout(t,4)}:function(t){t()};else n=function(){var t=e.MutationObserver||e.WebkitMutationObserver||e.WebKitMutationObserver,r=document.createElement("div"),n=void 0,i=new t(function(){var t=n;n=void 0,t()}),s=!0;return i.observe(r,{attributes:!0,childList:!0,characterData:!0}),function(t){n=t,s=!s,r.setAttribute("class",s?"foo":"bar")}}();t.exports=n},{"./assert.js":2,"./global.js":14}],31:[function(require,t){"use strict";t.exports=function(t,e,r){function n(t,r,n){return e(t,i,n,r===!0?t._boundTo:void 0).promise()}var i=require("./settled_promise_array.js")(t,r);t.settle=function(e){return n(e,!1,t.settle)},t.prototype.settle=function(){return n(this,!0,this.settle)}}},{"./settled_promise_array.js":32}],32:[function(require,t){"use strict";t.exports=function(t,e){function r(t,e,r){this.constructor$(t,e,r)}require("./assert.js");var n=require("./promise_inspection.js"),i=require("./util.js"),s=i.inherits;return s(r,e),r.prototype._promiseResolved=function(t,e){this._values[t]=e;var r=++this._totalResolved;r>=this._length&&this._fulfill(this._values)},r.prototype._promiseFulfilled=function(t,e){if(!this._isResolved()){var r=new n;r._bitField=268435456,r._resolvedValue=t,this._promiseResolved(e,r)}},r.prototype._promiseRejected=function(t,e){if(!this._isResolved()){var r=new n;r._bitField=134217728,r._resolvedValue=t,this._promiseResolved(e,r)}},r}},{"./assert.js":2,"./promise_inspection.js":20,"./util.js":36}],33:[function(require,t){"use strict";t.exports=function(t,e,r,n){function i(t,r,i,o){if((0|r)!==r)return n("howMany must be an integer");var a=e(t,s,o,i===!0?t._boundTo:void 0);return a.setHowMany(r),a.promise()}var s=require("./some_promise_array.js")(r);require("./assert.js"),t.some=function(e,r){return i(e,r,!1,t.some)},t.prototype.some=function(t){return i(this,t,!0,this.some)}}},{"./assert.js":2,"./some_promise_array.js":34}],34:[function(require,t){"use strict";t.exports=function(t){function e(t,e,r){this.constructor$(t,e,r),this._howMany=0,this._unwrap=!1}var r=require("./util.js"),n=r.inherits,i=r.isArray;return n(e,t),e.prototype._init=function(){this._init$(void 0,1);var t=i(this._values);this._holes=t?this._values.length-this.length():0,!this._isResolved()&&t&&(this._howMany=Math.max(0,Math.min(this._howMany,this.length())),this.howMany()>this._canPossiblyFulfill()&&this._reject([]))},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(t){this._isResolved()||(this._howMany=t)},e.prototype._promiseFulfilled=function(t){this._isResolved()||(this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._fulfill(this._values[0]):this._fulfill(this._values)))},e.prototype._promiseRejected=function(t){this._isResolved()||(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()&&(this._values.length===this.length()?this._reject([]):this._reject(this._values.slice(this.length()+this._holes))))},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()-this._holes},e.prototype._addRejected=function(t){this._values.push(t)},e.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e}},{"./util.js":36}],35:[function(require,t){"use strict";t.exports=function(t){var e=require("./promise_inspection.js");t.prototype.inspect=function(){return new e(this)}}},{"./promise_inspection.js":20}],36:[function(require,t){"use strict";function e(t){"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("Bluebird: "+t)}function r(t,e,r){try{return t.call(e,r)}catch(n){return d.e=n,d}}function n(t,e,r,n){try{return t.call(e,r,n)}catch(i){return d.e=i,d}}function i(t,e,r){try{return t.apply(r,e)}catch(n){return d.e=n,d}}function s(t){return"string"==typeof t?t:""+t}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!o(t)}function u(t){return o(t)?Error(s(t)):t}function l(t,e){var r,n=t.length,i=Array(n+1);for(r=0;n>r;++r)i[r]=t[r];return i[r]=e,i}function c(t,e,r){var n={value:r,configurable:!0,enumerable:!1,writable:!0};return Object.defineProperty(t,e,n),t}var f=require("./global.js");require("./assert.js");var h=function(){try{var t={};return Object.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),p=function(t,e,r){try{return c(t,e,r),t}catch(n){for(var i={},s=Object.keys(t),o=0,a=s.length;a>o;++o)try{var u=s[o];i[u]=t[u]}catch(l){i[u]=l}return c(i,e,r),i}},_=function(){return"undefined"!=typeof window&&null!==window&&window.document!==undefined&&"undefined"!=typeof navigator&&null!==navigator&&"string"==typeof navigator.appName&&window===f?!1:!0}(),v=Array.isArray||function(t){return t instanceof Array},d={e:{}},m=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype};t.exports={isArray:v,haveGetters:h,notEnumerableProp:c,isPrimitive:o,isObject:a,ensurePropertyExpansion:p,canEvaluate:_,deprecated:e,errorObj:d,tryCatch1:r,tryCatch2:n,tryCatchApply:i,inherits:m,withAppended:l,asString:s,maybeWrapAsError:u}},{"./assert.js":2,"./global.js":14}]},{},[4])(4)}),l._.Bluebird=t.exports}),r(function(t,e,r){function n(t,e){var r=e?W[ae]:W[ie];return r.test(t)?new o(t,e):null}function i(t,e){var r=n(t,e);return r?r.version:null}function s(t,e){var r=n(t,e);return r?r.version:null}function o(t,e){if(t instanceof o){if(t.loose===e)return t;t=t.version}if(!(this instanceof o))return new o(t,e);U("SemVer",t,e),this.loose=e;var r=t.trim().match(e?W[ae]:W[ie]);if(!r)throw new TypeError("Invalid Version: "+t);this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.prerelease=r[4]?r[4].split(".").map(function(t){return/^[0-9]+$/.test(t)?+t:t}):[],this.build=r[5]?r[5].split("."):[],this.format()}function a(t,e,r){try{return new o(t,r).inc(e).version}catch(n){return null}}function u(t,e){var r=Se.test(t),n=Se.test(e);return r&&n&&(t=+t,e=+e),r&&!n?-1:n&&!r?1:e>t?-1:t>e?1:0}function c(t,e){return u(e,t)}function f(t,e,r){return new o(t,r).compare(e)}function h(t,e){return f(t,e,!0)}function p(t,e,r){return f(e,t,r)}function _(t,r){return t.sort(function(t,n){return e.compare(t,n,r)})}function v(t,r){return t.sort(function(t,n){return e.rcompare(t,n,r)})}function d(t,e,r){return f(t,e,r)>0}function m(t,e,r){return 0>f(t,e,r)}function y(t,e,r){return 0===f(t,e,r)}function g(t,e,r){return 0!==f(t,e,r)}function j(t,e,r){return f(t,e,r)>=0}function b(t,e,r){return 0>=f(t,e,r)}function w(t,e,r,n){var i;switch(e){case"===":i=t===r;break;case"!==":i=t!==r;break;case"":case"=":case"==":i=y(t,r,n);break;case"!=":i=g(t,r,n);break;case">":i=d(t,r,n);break;case">=":i=j(t,r,n);break;case"<":i=m(t,r,n);break;case"<=":i=b(t,r,n);break;default:throw new TypeError("Invalid operator: "+e)}return i}function E(t,e){if(t instanceof E){if(t.loose===e)return t;t=t.value}return this instanceof E?(U("comparator",t,e),this.loose=e,this.parse(t),this.value=this.semver===Ve?"":this.operator+this.semver.version,undefined):new E(t,e)}function k(t,e){if(t instanceof k&&t.loose===e)return t;if(!(this instanceof k))return new k(t,e);if(this.loose=e,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}function x(t,e){return new k(t,e).set.map(function(t){return t.map(function(t){return t.value}).join(" ").trim().split(" ")})}function A(t,e){return U("comp",t),t=R(t,e),U("caret",t),t=C(t,e),U("tildes",t),t=P(t,e),U("xrange",t),t=V(t,e),U("stars",t),t}function T(t){return!t||"x"===t.toLowerCase()||"*"===t}function C(t,e){return t.trim().split(/\s+/).map(function(t){return F(t,e)}).join(" ")}function F(t,e){var r=e?W[ge]:W[ye];return t.replace(r,function(e,r,n,i,s){U("tilde",t,e,r,n,i,s);var o;return T(r)?o="":T(n)?o=">="+r+".0.0-0 <"+(+r+1)+".0.0-0":T(i)?o=">="+r+"."+n+".0-0 <"+r+"."+(+n+1)+".0-0":s?(U("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),o=">="+r+"."+n+"."+i+s+" <"+r+"."+(+n+1)+".0-0"):o=">="+r+"."+n+"."+i+"-0"+" <"+r+"."+(+n+1)+".0-0",U("tilde return",o),o})}function R(t,e){return t.trim().split(/\s+/).map(function(t){return O(t,e)}).join(" ")}function O(t,e){var r=e?W[ke]:W[Ee];return t.replace(r,function(e,r,n,i,s){U("caret",t,e,r,n,i,s);var o;return T(r)?o="":T(n)?o=">="+r+".0.0-0 <"+(+r+1)+".0.0-0":T(i)?o="0"===r?">="+r+"."+n+".0-0 <"+r+"."+(+n+1)+".0-0":">="+r+"."+n+".0-0 <"+(+r+1)+".0.0-0":s?(U("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),o="0"===r?"0"===n?"="+r+"."+n+"."+i+s:">="+r+"."+n+"."+i+s+" <"+r+"."+(+n+1)+".0-0":">="+r+"."+n+"."+i+s+" <"+(+r+1)+".0.0-0"):o="0"===r?"0"===n?"="+r+"."+n+"."+i:">="+r+"."+n+"."+i+"-0"+" <"+r+"."+(+n+1)+".0-0":">="+r+"."+n+"."+i+"-0"+" <"+(+r+1)+".0.0-0",U("caret return",o),o})}function P(t,e){return U("replaceXRanges",t,e),t.split(/\s+/).map(function(t){return S(t,e)}).join(" ")}function S(t,e){t=t.trim();var r=e?W[_e]:W[pe];return t.replace(r,function(e,r,n,i,s,o){U("xRange",t,e,r,n,i,s,o);var a=T(n),u=a||T(i),l=u||T(s),c=l;return"="===r&&c&&(r=""),r&&c?(a&&(n=0),u&&(i=0),l&&(s=0),">"===r&&(r=">=",a||(u?(n=+n+1,i=0,s=0):l&&(i=+i+1,s=0))),e=r+n+"."+i+"."+s+"-0"):a?e="*":u?e=">="+n+".0.0-0 <"+(+n+1)+".0.0-0":l&&(e=">="+n+"."+i+".0-0 <"+n+"."+(+i+1)+".0-0"),U("xRange return",e),e
})}function V(t,e){return U("replaceStars",t,e),t.trim().replace(W[Oe],"")}function L(t,e,r,n,i,s,o,a,u,l,c,f){return e=T(r)?"":T(n)?">="+r+".0.0-0":T(i)?">="+r+"."+n+".0-0":">="+e,a=T(u)?"":T(l)?"<"+(+u+1)+".0.0-0":T(c)?"<"+u+"."+(+l+1)+".0-0":f?"<="+u+"."+l+"."+c+"-"+f:"<="+a,(e+" "+a).trim()}function M(t,e){for(var r=0;t.length>r;r++)if(!t[r].test(e))return!1;return!0}function $(t,e,r){try{e=new k(e,r)}catch(n){return!1}return e.test(t)}function B(t,e,r){return t.filter(function(t){return $(t,e,r)}).sort(function(t,e){return p(t,e,r)})[0]||null}function H(t,e){try{return new k(t,e).range||"*"}catch(r){return null}}function D(t,e,r){return I(t,e,"<",r)}function N(t,e,r){return I(t,e,">",r)}function I(t,e,r,n){t=new o(t,n),e=new k(e,n);var i,s,a,u,l;switch(r){case">":i=d,s=b,a=m,u=">",l=">=";break;case"<":i=m,s=j,a=d,u="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($(t,e,n))return!1;for(var c=0;e.set.length>c;++c){var f=e.set[c],h=null,p=null;if(f.forEach(function(t){h=h||t,p=p||t,i(t.semver,h.semver,n)?h=t:a(t.semver,p.semver,n)&&(p=t)}),h.operator===u||h.operator===l)return!1;if((!p.operator||p.operator===u)&&s(t,p.semver))return!1;if(p.operator===l&&a(t,p.semver))return!1}return!0}"object"==typeof t&&t.exports===e&&(e=t.exports=o);var U;U="object"==typeof r&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var W=e.re=[],q=e.src=[],z=0,Z=z++;q[Z]="0|[1-9]\\d*";var Q=z++;q[Q]="[0-9]+";var G=z++;q[G]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var J=z++;q[J]="("+q[Z]+")\\."+"("+q[Z]+")\\."+"("+q[Z]+")";var X=z++;q[X]="("+q[Q]+")\\."+"("+q[Q]+")\\."+"("+q[Q]+")";var K=z++;q[K]="(?:"+q[Z]+"|"+q[G]+")";var Y=z++;q[Y]="(?:"+q[Q]+"|"+q[G]+")";var te=z++;q[te]="(?:-("+q[K]+"(?:\\."+q[K]+")*))";var ee=z++;q[ee]="(?:-?("+q[Y]+"(?:\\."+q[Y]+")*))";var re=z++;q[re]="[0-9A-Za-z-]+";var ne=z++;q[ne]="(?:\\+("+q[re]+"(?:\\."+q[re]+")*))";var ie=z++,se="v?"+q[J]+q[te]+"?"+q[ne]+"?";q[ie]="^"+se+"$";var oe="[v=\\s]*"+q[X]+q[ee]+"?"+q[ne]+"?",ae=z++;q[ae]="^"+oe+"$";var ue=z++;q[ue]="((?:<|>)?=?)";var le=z++;q[le]=q[Q]+"|x|X|\\*";var ce=z++;q[ce]=q[Z]+"|x|X|\\*";var fe=z++;q[fe]="[v=\\s]*("+q[ce]+")"+"(?:\\.("+q[ce]+")"+"(?:\\.("+q[ce]+")"+"(?:("+q[te]+")"+")?)?)?";var he=z++;q[he]="[v=\\s]*("+q[le]+")"+"(?:\\.("+q[le]+")"+"(?:\\.("+q[le]+")"+"(?:("+q[ee]+")"+")?)?)?";var pe=z++;q[pe]="^"+q[ue]+"\\s*"+q[fe]+"$";var _e=z++;q[_e]="^"+q[ue]+"\\s*"+q[he]+"$";var ve=z++;q[ve]="(?:~>?)";var de=z++;q[de]="(\\s*)"+q[ve]+"\\s+",W[de]=RegExp(q[de],"g");var me="$1~",ye=z++;q[ye]="^"+q[ve]+q[fe]+"$";var ge=z++;q[ge]="^"+q[ve]+q[he]+"$";var je=z++;q[je]="(?:\\^)";var be=z++;q[be]="(\\s*)"+q[je]+"\\s+",W[be]=RegExp(q[be],"g");var we="$1^",Ee=z++;q[Ee]="^"+q[je]+q[fe]+"$";var ke=z++;q[ke]="^"+q[je]+q[he]+"$";var xe=z++;q[xe]="^"+q[ue]+"\\s*("+oe+")$|^$";var Ae=z++;q[Ae]="^"+q[ue]+"\\s*("+se+")$|^$";var Te=z++;q[Te]="(\\s*)"+q[ue]+"\\s*("+oe+"|"+q[fe]+")",W[Te]=RegExp(q[Te],"g");var Ce="$1$2$3",Fe=z++;q[Fe]="^\\s*("+q[fe]+")"+"\\s+-\\s+"+"("+q[fe]+")"+"\\s*$";var Re=z++;q[Re]="^\\s*("+q[he]+")"+"\\s+-\\s+"+"("+q[he]+")"+"\\s*$";var Oe=z++;q[Oe]="(<|>)?=?\\s*\\*";for(var Pe=0;z>Pe;Pe++)U(Pe,q[Pe]),W[Pe]||(W[Pe]=RegExp(q[Pe]));e.parse=n,e.valid=i,e.clean=s,e.SemVer=o,o.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},o.prototype.inspect=function(){return'<SemVer "'+this+'">'},o.prototype.toString=function(){return this.version},o.prototype.compare=function(t){return U("SemVer.compare",this.version,this.loose,t),t instanceof o||(t=new o(t,this.loose)),this.compareMain(t)||this.comparePre(t)},o.prototype.compareMain=function(t){return t instanceof o||(t=new o(t,this.loose)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)},o.prototype.comparePre=function(t){if(t instanceof o||(t=new o(t,this.loose)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.lenth&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(U("prerelease compare",e,r,n),r===undefined&&n===undefined)return 0;if(n===undefined)return 1;if(r===undefined)return-1;if(r!==n)return u(r,n)}while(++e)},o.prototype.inc=function(t){switch(t){case"major":this.major++,this.minor=-1;case"minor":this.minor++,this.patch=-1;case"patch":this.patch++,this.prerelease=[];break;case"prerelease":if(0===this.prerelease.length)this.prerelease=[0];else{for(var e=this.prerelease.length;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}break;default:throw Error("invalid increment argument: "+t)}return this.format(),this},e.inc=a,e.compareIdentifiers=u;var Se=/^[0-9]+$/;e.rcompareIdentifiers=c,e.compare=f,e.compareLoose=h,e.rcompare=p,e.sort=_,e.rsort=v,e.gt=d,e.lt=m,e.eq=y,e.neq=g,e.gte=j,e.lte=b,e.cmp=w,e.Comparator=E;var Ve={};E.prototype.parse=function(t){var e=this.loose?W[xe]:W[Ae],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],r[2]?(this.semver=new o(r[2],this.loose),"<"!==this.operator||this.semver.prerelease.length||(this.semver.prerelease=["0"],this.semver.format())):this.semver=Ve},E.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},E.prototype.toString=function(){return this.value},E.prototype.test=function(t){return U("Comparator.test",t,this.loose),this.semver===Ve?!0:w(t,this.operator,this.semver,this.loose)},e.Range=k,k.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},k.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range},k.prototype.toString=function(){return this.range},k.prototype.parseRange=function(t){var e=this.loose;t=t.trim(),U("range",t,e);var r=e?W[Re]:W[Fe];t=t.replace(r,L),U("hyphen replace",t),t=t.replace(W[Te],Ce),U("comparator trim",t,W[Te]),t=t.replace(W[de],me),t=t.replace(W[be],we),t=t.split(/\s+/).join(" ");var n=e?W[xe]:W[Ae],i=t.split(" ").map(function(t){return A(t,e)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(t){return!!t.match(n)})),i=i.map(function(t){return new E(t,e)})},e.toComparators=x,k.prototype.test=function(t){if(!t)return!1;for(var e=0;this.set.length>e;e++)if(M(this.set[e],t))return!0;return!1},e.satisfies=$,e.maxSatisfying=B,e.validRange=H,e.ltr=D,e.gtr=N,e.outside=I,"function"==typeof define&&define.amd&&define(e),l._.SemVer=t.exports}),function(t){var e=t._.Fiber.extend(function(){return{name:"AbstractComponent. Override me to improve debugging",id:"abstractcomponent",depends:[],elements:{},events:{},states:{},config:{},_init:null,_state:{},_eventEmitter:null,_observableEmitter:null,_isDestroyed:!1,init:function(e,r){var n,i;if(this._init=function(){},this.config={},this._eventEmitter=new t._.EventEmitter({wildcard:!1,newListener:!1,maxListeners:20}),this._observableEmitter=new t._.EventEmitter({wildcard:!1,newListener:!1,maxListeners:0}),this.elements.root="The root HTML node of this component (automatically generated)",this.elements=o(this.elements,!0),this.events=o(this.events,!0,!0),this.states=o(this.states,!0,!0),this.depends=o(this.depends),e&&this.attach(e),r)for(n in r)if(r.hasOwnProperty(n)&&"function"!=typeof this[n]&&0!==n.indexOf("_")&&"depends"!==n&&"events"!==n&&"config"!==n)if("elements"===n)for(i in r.elements)r.elements.hasOwnProperty(i)&&this.elements._.set(i,r.elements[i]);else this.config[n]=r[n]},assign:function(t,e){if(!this.elements._.exists(t))throw Error("Invalid element: "+t+". Only elements defined in this.elements:{} may be assigned");return this.elements._.set(t,e),this},resolve:function(t,e){if(!this.depends._.exists(t))throw Error("Invalid dependency: "+t+". Only dependencies defined in this.depends:[] may be resolved");return this.depends._.set(t,e),this},destroy:function(){return this._isDestroyed=!0,this.offAny(),this.elements().root.parentNode&&this.elements().root.parentNode.removeChild(this.elements().root),this.removeAllListeners(),null},on:function(t,e){return"*"===t?this._eventEmitter.onAny(e):this._eventEmitter.on(t,e),this},off:function(t,e){return"*"===t?e?this._eventEmitter.offAny(e):this._eventEmitter.offAll(t):this._eventEmitter.off(t,e),this},onOnce:function(t,e){return this._eventEmitter.onOnce(t,e),this},setMaxListeners:function(t){return this._eventEmitter.setMaxListeners(t),this},listeners:function(t){var e=this._eventEmitter.listenersAny(),r=this._eventEmitter.listeners(t);return r.concat(e)},trigger:function(){var t=[].slice.call(arguments,0),e=t[0];if(!this.events._.exists(e))throw Error("Invalid event: "+e+". Only events defined in this.events:{} may be triggered");return this._eventEmitter.emit.apply(this._eventEmitter,t),this},bind:function(e,r,n){return"string"==typeof n?e.on(r,t.proxy(this[n],this)):e.on(r,n),this},unbind:function(t,e,r){return"string"==typeof r?t.off(e,this[r]):"function"==typeof r?t.off(e,r):t.off(e),this},wrap:function(e,r){var n=t.proxy(this[e],this),i=this;return this[e]=function(){var t=[].slice.call(arguments,0);return t.unshift(n),r.apply(i,t)},this},proxy:function(t,e){return function(){t.apply(e,arguments)}},attach:function(t){return this.assign("root",t),this},getRoot:function(){return this.elements().root},BEM:function(t,e){var r=this.id.replace(/[^A-Z0-9\-\_]/gi,"-");return t&&(r+="__"+t),e&&(r+="--"+e),r},addClass:function(t,e){var r=t.className;return i(t,e)||(r+=" "+e.replace(/[^A-Z0-9\-\_]/gi,"-"),r=r.replace(/^\s+|\s+$/g,"")),t.className=r,this},removeClass:function(t,e){var r=t.className;return r=r.replace(RegExp("(?:^|\\s)"+e.replace(c,"-")+"(?!\\S)","g"),""),r=r.replace(/^\s+|\s+$/g,""),t.className=r,this},when:function(){return t.when.apply(t,arguments)},whenAll:function(){return t.whenAll.apply(t,arguments)},load:function(e){this.elements().root&&(this.addClass(this.elements().root,this.BEM()),this.addClass(this.elements().root,this.BEM(this.elements.root)),this.addClass(this.elements().root,this.BEM(null,"loading")));for(var r,n=t.deferred(),i=this,s=[],o=this.depends._.raw(),a=this.depends(),u=0,l=o.length;l>u;u++)a[o[u]]||s.push(o[u]);return t.load.apply(t,s).then(function(n){var o,a,u=t.deferred();for(a=0,r=s.length;r>a;a++)i.depends._.set(s[a],n[a]);return o=t.when(i._init.call(i)),e&&(o=o.then(e)),o.then(function(){u.fulfill()},function(t){u.reject(t)}),u.promise}).then(function(){var t=i.elements._.raw();for(var e in t)t.hasOwnProperty(e)&&i.elements()[e]&&i.addClass(i.elements()[e],i.BEM(e));i.elements().root&&i.removeClass(i.elements().root,i.BEM(null,"loading")),n.fulfill()},function(t){i.elements().root&&(i.removeClass(i.elements().root,i.BEM(null,"loading")),i.addClass(i.elements().root,i.BEM(null,"failed"))),n.reject(t)}),n.promise},wire:function(t){function e(){return function(){}}function r(t,e){t.wrap("_init",function(r){r(),e.call(t)})}var n,i,s,o,a,u,l,c=/^[\[\]]/,f=/[\[\]]$/;if("function"==typeof t){if(t.__atomic)throw Error("Atomic Wirings must be configured (by invoking their function) and passing their return value into wire()");u={init:t}}else u=t;for(n in u)if(u.hasOwnProperty(n)){if(l=n.replace(c,"").replace(f,""),"_init"==l)throw Error('You cannot wire in "_init" as it\'s a reserved method. Please use "init" without the underscore.');if("events"!==n)if("elements"!==n)if("depends"!==n)"init"!==n&&"init"!==l?"function"!=typeof u[n]||(this[l]||(this[l]=e()),l!==n?0===n.indexOf("[")&&this.wrap(l,u[n]):this[l]=u[n]):"]init["===n?this._init=u[n]:r(this,u[n]);else for(o=0,a=u.depends.length;a>o;o++)this.depends._.add(u.depends[o]);else for(i in u.elements)this.elements[i]||this.elements._.add(i,u.elements[i]);else for(s in u.events)u.events.hasOwnProperty(s)&&this.properties._.add(s,u.events[s])}return this},state:function(t,e,undefined){var r,n=[].slice.call(arguments,0),i={},s=[],o=null;if(n[1]===undefined){if(n[0]===undefined){for(r in this._state)this._state.hasOwnProperty(r)&&(i[r]=this._state[r].value);return i}if("string"==typeof n[0])return this._state[n[0]].value}if("object"==typeof n[0])for(r in n[0])if(n[0].hasOwnProperty(r)){if(!this.states._.exists(r))throw Error("Invalid state: "+r+". Only states defined in this.states:{} may be set");n[1]?(this._state[r].rev++,this._state[r].lastValue=this._state[r].value,this._state[r].value=n[0][r]):this._state[r]===undefined&&(this._state[r]={rev:0,value:n[0][r],lastValue:undefined}),s.push(r)}if("string"==typeof n[0]){if(!this.states._.exists(n[0]))throw Error("Invalid state: "+n[0]+". Only states defined in this.states:{} may be set");this._state[n[0]]===undefined?this._state[n[0]]={rev:0,value:n[1],lastValue:undefined}:(this._state[n[0]].rev++,this._state[n[0]].lastValue=this._state[n[0]].value,this._state[n[0]].value=n[1]),s.push(n[0])}for(var a=0,u=s.length;u>a;a++)o=this._state[s[a]],this._observableEmitter.emit(s[a],o.value,o.lastValue,o.rev);return s.length>0?this.render():this},observe:function(t,e){return"*"===t?this._observableEmitter.onAny(e):this._observableEmitter.on(t,e),this},unobserve:function(t,e){return"*"===t?e?this._observableEmitter.offAny(e):this._observableEmitter.offAll(t):this._observableEmitter.off(t,e),this},render:function(){return this}}});t._.AbstractComponent=e}(l),function(t){var e=new t._.EventEmitter({wildcard:!0,newListener:!1,maxListeners:20});t.augment(t.Events,{on:function(r,n){return e.on(r,n),t},off:function(r,n){return e.off(r,n),t},onAny:function(r){return e.onAny(r),t},offAny:function(r){return e.offAny(r),t},onOnce:function(r,n){return e.onOnce(r,n),t},onMany:function(r,n,i){return e.onMany(r,n,i),t},offAll:function(r){return e.offAll(r),t},setMaxListeners:function(r){return e.setMaxListeners(r),t},listeners:function(t){var r=e.listenersAny(),n=e.listeners(t);return n.concat(r)},trigger:function(){var r=[].slice.call(arguments,0);return e.emit.apply(e,r),t}})}(l),function(t){t.augment(t._,{Factory:function(e){var r={depends:!1,elements:!1,events:!1,init:!0,_init:!0,_eventEmitter:!0,_isDestroyed:!0},n=t._.AbstractComponent.extend(function(t){var n={};for(var i in e)e.hasOwnProperty(i)&&!r[i]&&(n[i]=e[i]);return n.init=function(){t.init.apply(this,arguments),"function"==typeof e.init&&(this._init=e.init)},n});return n}}),t.augment(t,{Component:function(e){return t._.Factory(e)},Wiring:function(t){return t.__atomic=!0,t}})}(l),function(t){t.augment(t,{loader:{init:function(){},register:function(e,r){t._.modules[e]=r},load:function(e){for(var r=[],n=0,i=e.length;i>n;n++){if(!t._.modules[e[n]])throw Error("Module ID is not defined: "+e[n]);r.push(t._.modules[e[n]])}return r}}})}(l),function(t,e){var r=e.Atomic,i=!1,o=!1;t.augment(t,{noConflict:function(){var t=e.Atomic;return e.Atomic=r,t},amdOptimized:function(){o=!0},load:function(){var e=t.deferred(),r=[].slice.call(arguments,0);"function"==typeof r[r.length-1]&&(e.promise.then(r[r.length-1]),r.pop()),1===r.length&&(r=r[0]),s(r)||(r=[r]);var n=null;return i?n=t.when(!0):(i=!0,n=t.when(t.loader.init()),n.then(function(){t.loader.register("Atomic",t),t.loader.register("Atomic/Component",t.Component)})),n.then(function(){return t.when(t.loader.load(r))}).then(function(t){return e.fulfill(t)},function(t){return e.reject(t)}),e.promise},proxy:function(t,e){return function(){return t.apply(e,arguments)}},throttle:function(t,e,r){var n,i,s,o=null,a=0,u=function(){a=new Date,o=null,s=t.apply(n,i)};return function(){var l=new Date;a||r!==!1||(a=l);var c=e-(l-a);return n=this,i=arguments,0>=c?(clearTimeout(o),o=null,a=l,s=t.apply(n,i)):o||(o=setTimeout(u,c)),s}},debounce:function(t,e,r){var n,i=null;return function(){var s=this,o=arguments,a=function(){i=null,r||(n=t.apply(s,o))},u=r&&!i;return clearTimeout(i),i=setTimeout(a,e),u&&(n=t.apply(s,o)),n}},expand:function(t){return function(e){var r,n=[];if("[object Array]"===Object.prototype.toString.call(e))n=e;else for(r in e)e.hasOwnProperty(r)&&n.push(e[r]);t.apply(t,n)}},keys:function(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&(r[r.length]=e);return r},deferred:function(t){var e=n();return t?(e.cast(t),undefined):e.pending()},when:function(t){return n().cast(t)},whenAll:function(t){return n().all(t)},error:function(t){var e="",r="";"object"==typeof t?(t.message?e=t.message:t.toString&&(e=""+t),t.stack?r=t.stack:t.stacktrace&&(r=t.stacktrace)):"string"==typeof t&&(e=t),console&&console.error&&console.error(e+"\n"+r)},describe:function(r,n){function i(t){var i=new t,o=[],a={};a.component=r,a.name=i.name,a.depends=i.depends._.raw(),a.events=i.events._.raw(),a.states=i.states._.raw(),o=[r+": "+i.name,"=====","BEM id: "+i.BEM(),"dependencies: "+i.depends._.raw().join(", "),"","ELEMENTS",""+i.elements,"","EVENTS",""+i.events,"","STATES",""+i.states],n&&e.console&&"function"==typeof e.console.log&&e.console.log(o.join("\n")),s.fulfill(a)}n===undefined&&(n=!0);var s=t.deferred();if("string"==typeof r)t.load([r]).then(t.expand(function(t){i(t)},t.e)).then(null,t.e);else if("function"==typeof r){var o=new r;i(o)}else i(r);return s.promise},define:function(e,r,n){if("string"!=typeof e)throw Error("you must specify an ID if you are not using a module loader system");"[object Array]"!==Object.prototype.toString.call(r)&&(n=r,r=[]);for(var i,require=function(e){if(window.console&&window.console.warn&&window.console.warn("using runtime require() is dangerous without a module loader"),!t._.modules[e])throw Error("Module not loaded: "+e);return t._.modules[e]},s={exports:{}},o=[],a=0,u=r.length;u>a;a++)if("require"!==r[a])if("module"!==r[a])if("exports"!==r[a]){if(!t._.modules[r[a]])throw Error("Module not loaded: "+r[a]);o.push(t._.modules[r[a]])}else o.push(s.exports);else o.push(s);else o.push(require);"function"==typeof n?(i=n.apply(n,o),t._.modules[e]=i?i:s.exports):t._.modules[e]=n}})}(l,t),function(t){t.augment(t,{version:"0.0.9-8-gecd85cb"})}(l);var f="function"==typeof a&&a.amd?a:l;f("Atomic",[],function(){return l}),f("Atomic/Component",[],function(){return l.Component}),f("Atomic/Wiring",[],function(){return l.Wiring})}})(this,function(){return define});